# æ¨¡æ¿åˆ é™¤åŠŸèƒ½æµ‹è¯•æ–‡æ¡£

## ğŸ“‹ æµ‹è¯•è¦†ç›–èŒƒå›´

### 1. å•å…ƒæµ‹è¯•
- âœ… ä½¿ç”¨æœ‰æ•ˆIDåˆ é™¤æ¨¡æ¿
- âœ… ç©ºID/ç©ºç™½IDåº”è¯¥å¤±è´¥
- âœ… åˆ é™¤ä¸å­˜åœ¨çš„æ¨¡æ¿
- âœ… åˆ é™¤æ—§æ ¼å¼æ¨¡æ¿ï¼ˆå…¼å®¹æ€§ï¼‰
- âœ… åˆ é™¤åŒåæ¨¡æ¿
- âœ… è¿ç»­å¿«é€Ÿåˆ é™¤

### 2. é›†æˆæµ‹è¯•
- âœ… UIå±‚é™çº§é€»è¾‘ï¼ˆid â†’ nameï¼‰
- âœ… é”™è¯¯æ¶ˆæ¯æ ¼å¼éªŒè¯

### 3. å¥å£®æ€§æµ‹è¯•
- âœ… æ–‡ä»¶æƒé™é”™è¯¯å¤„ç†
- âœ… å¼‚å¸¸æ•°æ®å¤„ç†ï¼ˆæ— idæ— nameï¼‰
- âœ… å¹¶å‘åˆ é™¤åœºæ™¯

## ğŸš€ å¿«é€Ÿå¼€å§‹

### Windows
```bash
# è¿è¡Œæµ‹è¯•
run_tests.bat

# æˆ–è€…ç›´æ¥è¿è¡Œ
python tests/test_template_standalone.py
```

### Linux/macOS
```bash
# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x run_tests.sh

# è¿è¡Œæµ‹è¯•
./run_tests.sh

# æˆ–è€…ç›´æ¥è¿è¡Œ
python3 tests/test_template_standalone.py
```

## ğŸ“Š æµ‹è¯•ç»“æœç¤ºä¾‹

```
======================================================================
ğŸ§ª æ¨¡æ¿åˆ é™¤åŠŸèƒ½æµ‹è¯•å¥—ä»¶
======================================================================

  âœ… ä½¿ç”¨æœ‰æ•ˆIDåˆ é™¤æ¨¡æ¿
  âœ… ç©ºIDåº”è¯¥å¤±è´¥
  âœ… åˆ é™¤ä¸å­˜åœ¨çš„æ¨¡æ¿
  âœ… åˆ é™¤æ—§æ ¼å¼æ¨¡æ¿
  âœ… åˆ é™¤åŒåæ¨¡æ¿
  âœ… UIå±‚é™çº§é€»è¾‘
  âœ… é”™è¯¯æ¶ˆæ¯æ ¼å¼
  âœ… è¿ç»­å¿«é€Ÿåˆ é™¤

======================================================================
æµ‹è¯•ç»“æœ: 8/8 é€šè¿‡

ğŸ‰ æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼
======================================================================
```

## ğŸ”§ æ¶æ„æ”¹è¿›ç‚¹

### 1. å‡½æ•°ç­¾åå¢å¼º
**ä¹‹å‰:**
```python
def delete_template(template_id: str) -> bool
```

**ç°åœ¨:**
```python
def delete_template(template_id: str) -> tuple[bool, str]
```

**ä¼˜åŠ¿:**
- è¿”å›è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯
- ä¾¿äºUIå±‚æ˜¾ç¤ºå…·ä½“é”™è¯¯
- æ”¯æŒè°ƒè¯•å’Œæ—¥å¿—è®°å½•

### 2. å¼‚å¸¸å¤„ç†ç»†åŒ–
**ä¹‹å‰:**
```python
try:
    ...
except:
    return False
```

**ç°åœ¨:**
```python
try:
    ...
except PermissionError:
    return False, "æ–‡ä»¶æƒé™ä¸è¶³ï¼Œæ— æ³•åˆ é™¤æ¨¡æ¿"
except json.JSONDecodeError as e:
    return False, f"æ¨¡æ¿æ–‡ä»¶æ ¼å¼é”™è¯¯: {str(e)}"
except Exception as e:
    return False, f"åˆ é™¤å¤±è´¥: {str(e)}"
```

**ä¼˜åŠ¿:**
- ç²¾ç¡®çš„é”™è¯¯åˆ†ç±»
- ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- ä¾¿äºå®šä½é—®é¢˜

### 3. UIå±‚é™çº§é€»è¾‘
**ä¹‹å‰:**
```python
template_id = template.get("id")
success = delete_template(template_id)  # Noneä¼šå¯¼è‡´é”™è¯¯
```

**ç°åœ¨:**
```python
template_id = template.get("id") or template.get("name")
if not template_id:
    # æ˜¾ç¤ºé”™è¯¯æç¤º
    return
success, message = delete_template(template_id)
```

**ä¼˜åŠ¿:**
- å…¼å®¹æ—§æ ¼å¼æ¨¡æ¿
- é˜²æ­¢Noneå¯¼è‡´çš„é”™è¯¯
- æä¾›æ˜ç¡®çš„é”™è¯¯åé¦ˆ

### 4. æ•°æ®è¿ç§»å…¼å®¹
**ä¿å­˜æ¨¡æ¿æ—¶è‡ªåŠ¨è¡¥é½ID:**
```python
if "id" not in t:
    t["id"] = str(uuid.uuid4())
```

**åˆ é™¤æ”¯æŒåŒé‡åŒ¹é…:**
```python
filtered = [t for t in templates 
            if t.get("id") != template_id 
            and t.get("name") != template_id]
```

## ğŸ¯ æµ‹è¯•ç­–ç•¥

### æµ‹è¯•é‡‘å­—å¡”
```
       /\
      /UI\      <- é›†æˆæµ‹è¯•ï¼ˆUIå±‚äº¤äº’ï¼‰
     /____\
    /      \    <- å•å…ƒæµ‹è¯•ï¼ˆæ ¸å¿ƒé€»è¾‘ï¼‰
   /________\   <- è¾¹ç•Œæµ‹è¯•ï¼ˆå¼‚å¸¸åœºæ™¯ï¼‰
```

### è¾¹ç•Œæ¡ä»¶
1. **ç©ºå€¼æµ‹è¯•**: `""`, `"   "`, `None`
2. **ä¸å­˜åœ¨æµ‹è¯•**: éšæœºUUID
3. **æƒé™æµ‹è¯•**: åªè¯»æ–‡ä»¶
4. **æ ¼å¼æµ‹è¯•**: æ—§æ ¼å¼ã€æ–°æ ¼å¼ã€æ··åˆæ ¼å¼
5. **å¹¶å‘æµ‹è¯•**: å¿«é€Ÿè¿ç»­åˆ é™¤

## ğŸ“ æŒç»­é›†æˆå»ºè®®

### Pre-commit Hook
```bash
#!/bin/bash
python tests/test_template_standalone.py
if [ $? -ne 0 ]; then
    echo "âŒ æµ‹è¯•å¤±è´¥ï¼Œæäº¤è¢«é˜»æ­¢"
    exit 1
fi
```

### CI/CD é…ç½®
```yaml
# .github/workflows/test.yml
test:
  runs-on: windows-latest
  steps:
    - uses: actions/checkout@v2
    - name: Run tests
      run: python tests/test_template_standalone.py
```

## ğŸ› å·²çŸ¥é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

### é—®é¢˜1: æ—§æ¨¡æ¿æ— ID
**è§£å†³æ–¹æ¡ˆ:** 
- `save_template`è‡ªåŠ¨è¡¥é½
- `delete_template`æ”¯æŒnameé™çº§

### é—®é¢˜2: å¹¶å‘å†™å…¥å†²çª
**å½“å‰çŠ¶æ€:** ç®€å•çš„é¡ºåºå†™å…¥
**æœªæ¥æ”¹è¿›:** æ–‡ä»¶é”æœºåˆ¶

### é—®é¢˜3: å¤§é‡æ¨¡æ¿æ€§èƒ½
**å½“å‰çŠ¶æ€:** å…¨é‡åŠ è½½
**æœªæ¥æ”¹è¿›:** åˆ†é¡µæˆ–ç´¢å¼•

## ğŸ“š å‚è€ƒèµ„æ–™

- [Pythonå•å…ƒæµ‹è¯•æœ€ä½³å®è·µ](https://docs.python.org/3/library/unittest.html)
- [æµ‹è¯•é©±åŠ¨å¼€å‘(TDD)](https://en.wikipedia.org/wiki/Test-driven_development)
- [è½¯ä»¶æ¶æ„è®¾è®¡æ¨¡å¼](https://refactoring.guru/design-patterns)
